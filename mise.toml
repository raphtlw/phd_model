min_version = "2025.7.24"

[env]
NODE_VERSION = "22"

# Set path for node module binaries
_.path = ["{{config_root}}/node_modules/.bin"]

# Use the project name derived from the current directory
PROJECT_NAME = "{{ config_root | basename }}"
NODE_ENV = "{{ env.NODE_ENV | default(value='development') }}"

[tools]
node = "{{ get_env(name='NODE_VERSION', default='lts') }}"
pnpm = "latest"

# Global npm packages
"npm:typescript" = "latest"
"npm:prettier" = "latest"
"npm:eslint" = "latest"
"npm:jest" = "latest"

"gemini" = "latest"
"opencode" = "latest"

[shell_alias]
pm = "pnpm"
px = "pnpm dlx"
gita = "git add ."
gitc = "git commit -m"

[tasks.digest]
description = "Generate digest.txt for LLMs to use, copy to clipboard"
run = """
#!/bin/bash
gitingest --exclude-pattern {{option(name="patterns")}},.agent,AGENTS.md,src/renderer/lib,*.yaml,scripts/*,.github/*
agents="$(< AGENTS.md)\n"
echo "$agents" | cat - digest.txt > temp && mv temp digest.txt
cat digest.txt | pbcopy
"""
